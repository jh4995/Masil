/* src/pages/ActivityListPage.css - 5060세대 최적화 + 브라우저 주소창 대응 완전 새로운 구조 */

.activity-page-container {
  /* 🆕 수정: 브라우저 주소창 문제 해결을 위한 전체 스타일 수정 */
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100vw;
  height: 100vh;
  height: 100dvh; /* iOS Safari 지원 */
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  background-color: #ffffff;
  overflow: hidden;
  font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
  box-sizing: border-box;
  
  /* 🆕 추가: 안전 영역 고려 (노치 대응) */
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* 헤더 - 고정된 높이 */
.activity-header {
  width: 100%;
  height: 70px; /* 개선: 60px → 70px로 증가 */
  background-color: var(--primary-color, #34495e);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 20px;
  box-sizing: border-box;
  position: relative;
  z-index: 100;
  flex-shrink: 0; /* 크기 고정 */
}

.activity-title {
  font-size: 22px; /* 개선: 20px → 22px로 추가 증가 */
  font-weight: 700; /* 개선: 600 → 700으로 증가 */
  margin: 0;
  text-align: center;
  font-family: var(--font, 'Pretendard', system-ui);
  line-height: 1.3;
}

/* 사용자 맞춤 서브타이틀 */
.activity-subtitle {
  font-size: 18px; /* 개선: 16px → 18px로 추가 증가 */
  color: rgba(255, 255, 255, 0.8);
  margin: 6px 0 0 0; /* 개선: 4px → 6px로 증가 */
  text-align: center;
  font-weight: 600; /* 개선: 500 → 600으로 증가 */
}

/* 지도 컨테이너 - 남은 공간에서 네비게이션 바 높이를 뺀 만큼 사용 */
.map-container {
  flex: 1; /* 남은 공간 모두 사용 */
  width: 100%;
  margin: 0;
  padding: 0;
  background-color: #f8f9fa;
  position: relative;
  overflow: hidden;
  /* 🆕 수정: 하단 네비게이션 바 높이만큼 여유 공간 확보 */
  min-height: calc(100% - 90px); /* 네비게이션 바 높이(90px)를 뺀 나머지 */
}

/* 지도 로딩 화면 */
.map-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  background-color: #f8f9fa;
  color: #2C3E50; /* 개선: #666 → #2C3E50로 변경 */
  font-family: var(--font, 'Pretendard', system-ui);
  margin: 0;
  padding: 0;
}

/* 로딩 텍스트 스타일 개선 */
.map-loading div {
  text-align: center;
}

.map-loading div div:first-child {
  font-size: 52px; /* 개선: 48px → 52px로 증가 */
  margin-bottom: 20px; /* 개선: 16px → 20px로 증가 */
}

.map-loading div p {
  font-size: 20px; /* 개선: 18px → 20px로 증가 */
  font-weight: 600;
  margin: 0;
  line-height: 1.3;
}

/* 지도 요소 전체 채우기 */
.map-container > div,
.map-container #map,
.map-container > div > div {
  width: 100% !important;
  height: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
  border: none !important;
  display: block !important;
}

/* 네이버 지도 컨테이너 강제 스타일 */
.map-container .naver-map {
  width: 100% !important;
  height: 100% !important;
}

/* 🆕 수정: 하단 네비게이션 바 - 절대 위치로 하단 고정 */
.activity-page-container .bottom-nav {
  position: absolute; /* fixed 대신 absolute 사용 */
  bottom: 0;
  left: 0;
  right: 0;
  width: 100%;
  height: 90px; /* 개선: 80px → 90px로 증가 */
  flex-shrink: 0; /* 크기 고정 */
  background-color: white;
  border-top: 1px solid var(--border-color, #e0e0e0);
  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
  display: flex;
  justify-content: space-around;
  align-items: center;
  padding: 16px 0 20px; /* 개선: 12px 0 16px → 16px 0 20px로 증가 */
  box-sizing: border-box;
  z-index: 100;
  
  /* 🆕 추가: 안전 영역 하단 패딩 추가 */
  padding-bottom: max(20px, env(safe-area-inset-bottom));
}

/* 네비게이션 아이템 스타일 개선 (5060세대 고려) */
.activity-page-container .bottom-nav .nav-item {
  padding: 14px 22px; /* 개선: 12px 20px → 14px 22px로 추가 증가 */
  border-radius: 12px;
  transition: all 0.3s ease;
  min-width: 95px; /* 개선: 90px → 95px로 추가 증가 */
  min-height: 62px; /* 개선: 58px → 62px로 추가 증가 */
  box-sizing: border-box;
}

.activity-page-container .bottom-nav .nav-icon {
  font-size: 30px; /* 개선: 28px → 30px로 추가 증가 */
  transition: transform 0.3s ease;
  line-height: 1;
}

.activity-page-container .bottom-nav .nav-item span {
  font-size: 17px; /* 개선: 16px → 17px로 추가 증가 */
  font-weight: 600; /* 개선: 500 → 600으로 증가 */
  color: var(--text-primary, #333);
  transition: color 0.3s ease;
  line-height: 1.2;
}

.activity-page-container .bottom-nav .nav-item.active span {
  color: white;
  font-weight: 700; /* 개선: 600 → 700으로 증가 */
}

/* 툴팁 스타일 개선 (5060세대 고려) */
.activity-page-container .bottom-nav .nav-tooltip {
  padding: 14px 18px; /* 개선: 12px 16px → 14px 18px로 추가 증가 */
  border-radius: 22px; /* 개선: 20px → 22px로 증가 */
  font-size: 17px; /* 개선: 16px → 17px로 추가 증가 */
  font-weight: 700; /* 개선: 600 → 700으로 증가 */
  white-space: nowrap;
  box-shadow: 0 10px 30px rgba(44, 62, 80, 0.35); /* 개선: 그림자 강화 */
  margin-bottom: 24px; /* 개선: 22px → 24px로 증가 */
  z-index: 1000;
  opacity: 1;
  animation: tooltipFadeIn 0.3s ease-out;
  pointer-events: none;
  max-width: 220px; /* 개선: 200px → 220px로 추가 증가 */
  text-align: center;
  line-height: 1.4; /* 개선: 1.3 → 1.4로 증가 */
}

/* AI 추천 툴팁 (Job있으 버튼용) */
.activity-page-container .bottom-nav .nav-tooltip.ai-tooltip {
  background: linear-gradient(135deg, #BFCC6B 0%, #a8b85a 100%);
  color: #2C3E50;
  font-weight: 700;
  transform: translateX(-50%);
  left: 50%;
}

.activity-page-container .bottom-nav .nav-tooltip.ai-tooltip::after {
  border-top-color: #a8b85a;
  left: 50%;
}

/* 음성 추천 툴팁 (마이크 버튼용) */
.activity-page-container .bottom-nav .nav-tooltip.voice-tooltip {
  background: linear-gradient(135deg, #2C3E50 0%, #2C3E50 100%);
  color: white;
  font-weight: 700;
  transform: translateX(-50%);
  left: 50%;
}

.activity-page-container .bottom-nav .nav-tooltip.voice-tooltip::after {
  border-top-color: #2C3E50;
  left: 50%;
}

/* 모바일 최적화 */
@media (max-width: 480px) {
  .activity-page-container {
    /* 🆕 수정: 모바일에서도 동적 높이 사용 */
    height: 100vh;
    height: 100dvh;
  }
  
  .activity-header {
    height: 60px; /* 개선: 50px → 60px로 증가 */
    padding: 0 16px;
  }
  
  .activity-title {
    font-size: 20px; /* 개선: 18px → 20px로 추가 증가 */
    font-weight: 700; /* 폰트 굵기 유지 */
  }
  
  .activity-subtitle {
    font-size: 16px; /* 개선: 14px → 16px로 추가 증가 */
    font-weight: 600; /* 폰트 굵기 유지 */
  }
  
  .activity-page-container .bottom-nav {
    height: 82px; /* 개선: 80px → 82px로 추가 증가 */
    padding: 14px 0 18px; /* 개선: 12px 0 16px → 14px 0 18px로 증가 */
    /* 🆕 수정: 모바일 안전 영역 패딩 강화 */
    padding-bottom: max(18px, env(safe-area-inset-bottom));
  }
  
  .activity-page-container .bottom-nav .nav-item {
    padding: 12px 18px; /* 개선: 10px 16px → 12px 18px로 추가 증가 */
    min-width: 85px; /* 개선: 80px → 85px로 추가 증가 */
    min-height: 58px; /* 개선: 54px → 58px로 추가 증가 */
  }
  
  .activity-page-container .bottom-nav .nav-icon {
    font-size: 28px; /* 개선: 26px → 28px로 추가 증가 */
  }
  
  .activity-page-container .bottom-nav .nav-item span {
    font-size: 16px; /* 개선: 15px → 16px로 추가 증가 */
    font-weight: 600; /* 폰트 굵기 유지 */
  }
  
  /* 모바일에서 툴팁 크기 조정 */
  .activity-page-container .bottom-nav .nav-tooltip {
    font-size: 16px; /* 개선: 15px → 16px로 추가 증가 */
    padding: 12px 16px; /* 개선: 10px 14px → 12px 16px로 증가 */
    margin-bottom: 20px; /* 개선: 18px → 20px로 증가 */
    max-width: 200px; /* 개선: 180px → 200px로 추가 증가 */
    border-radius: 18px; /* 개선: 16px → 18px로 증가 */
  }
  
  .activity-page-container .bottom-nav .nav-tooltip::after {
    border-left-width: 9px; /* 개선: 8px → 9px로 증가 */
    border-right-width: 9px;
    border-top-width: 9px;
  }
  
  .map-loading div div:first-child {
    font-size: 50px; /* 개선: 48px → 50px로 추가 증가 */
    margin-bottom: 18px; /* 개선: 16px → 18px로 증가 */
  }
  
  .map-loading div p {
    font-size: 19px; /* 개선: 18px → 19px로 추가 증가 */
    font-weight: 600; /* 폰트 굵기 유지 */
  }
}

/* 추가 반응형 최적화 */
@media (max-width: 360px) {
  .activity-header {
    height: 56px;
    padding: 0 12px;
  }
  
  .activity-title {
    font-size: 16px;
  }
  
  .activity-subtitle {
    font-size: 13px;
  }
  
  .activity-page-container .bottom-nav {
    height: 76px;
    padding: 10px 0 14px;
    /* 🆕 수정: 작은 화면 안전 영역 패딩 */
    padding-bottom: max(14px, env(safe-area-inset-bottom));
  }
  
  .activity-page-container .bottom-nav .nav-item {
    min-width: 75px;
    min-height: 50px;
    padding: 8px 12px;
  }
  
  .activity-page-container .bottom-nav .nav-icon {
    font-size: 24px;
  }
  
  .activity-page-container .bottom-nav .nav-item span {
    font-size: 14px;
  }
}

/* 🆕 추가: iOS Safari 주소창 숨김 효과 */
@supports (-webkit-touch-callout: none) {
  .activity-page-container {
    /* iOS Safari에서 주소창 숨김을 위한 추가 높이 */
    height: calc(100vh + 1px);
    height: calc(100dvh + 1px);
  }
}

/* 🆕 추가: 가로모드 대응 */
@media (orientation: landscape) and (max-height: 500px) {
  .activity-header {
    height: 50px;
  }
  
  .activity-title {
    font-size: 18px;
  }
  
  .activity-page-container .bottom-nav {
    height: 70px;
    padding: 10px 0 12px;
  }
  
  .activity-page-container .bottom-nav .nav-item {
    min-height: 50px;
    padding: 8px 16px;
  }
  
  .activity-page-container .bottom-nav .nav-icon {
    font-size: 26px;
  }
}